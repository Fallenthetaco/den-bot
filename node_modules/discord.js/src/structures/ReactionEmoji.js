<<<<<<< HEAD
const Constants = require('../util/Constants');
const Snowflake = require('../util/Snowflake');
=======
'use strict';

const Emoji = require('./Emoji');
const Util = require('../util/Util');
>>>>>>> discord-js-12-update

/**
 * Represents a limited emoji set used for both custom and unicode emojis. Custom emojis
 * will use this class opposed to the Emoji class when the client doesn't know enough
 * information about them.
 * @extends {Emoji}
 */
<<<<<<< HEAD
class ReactionEmoji {
  constructor(reaction, emoji) {
    /**
     * The client that instantiated this object
     * @name ReactionEmoji#client
     * @type {Client}
     * @readonly
     */
    Object.defineProperty(this, 'client', { value: reaction.message.client });

=======
class ReactionEmoji extends Emoji {
  constructor(reaction, emoji) {
    super(reaction.message.client, emoji);
>>>>>>> discord-js-12-update
    /**
     * The message reaction this emoji refers to
     * @type {MessageReaction}
     */
    this.reaction = reaction;
<<<<<<< HEAD

    /**
     * The name of this reaction emoji
     * @type {string}
     */
    this.name = emoji.name;

    /**
     * The ID of this reaction emoji
     * @type {?Snowflake}
     */
    this.id = emoji.id;

    /**
     * Whether this reaction emoji is animated
     * @type {boolean}
     */
    this.animated = emoji.animated || false;
  }

  /**
   * The timestamp the reaction emoji was created at, or null if unicode
   * @type {?number}
   * @readonly
   */
  get createdTimestamp() {
    if (!this.id) return null;
    return Snowflake.deconstruct(this.id).timestamp;
  }

  /**
   * The time the reaction emoji was created, or null if unicode
   * @type {?Date}
   * @readonly
   */
  get createdAt() {
    if (!this.id) return null;
    return new Date(this.createdTimestamp);
  }

  /**
   * The URL to the reaction emoji file, or null if unicode
   * @type {string}
   * @readonly
   */
  get url() {
    if (!this.id) return null;
    return Constants.Endpoints.CDN(this.client.options.http.cdn).Emoji(this.id, this.animated ? 'gif' : 'png');
=======
>>>>>>> discord-js-12-update
  }

  toJSON() {
    return Util.flatten(this, { identifier: true });
  }

<<<<<<< HEAD
  /**
   * Creates the text required to form a graphical emoji on Discord.
   * @example
   * // Send the emoji used in a reaction to the channel the reaction is part of
   * reaction.message.channel.send(`The emoji used is ${reaction.emoji}`);
   * @returns {string}
   */
  toString() {
    if (!this.id) return this.name;

    return `<${this.animated ? 'a' : ''}:${this.name}:${this.id}>`;
=======
  valueOf() {
    return this.id;
>>>>>>> discord-js-12-update
  }
}

module.exports = ReactionEmoji;
